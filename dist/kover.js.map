{"version":3,"sources":["../src/kover.js"],"names":["w","$","fn","kover","getNatural","DOMelement","img","Image","src","width","height","each","_","init","length","ratio","window","on","calcStyle","preload","path","get","Math","random","onload","img_size","l","time","int","s","setInterval","clearInterval","wrapcell","r","css","position","zIndex","top","left","marginLeft","marginTop","maxWidth","jQuery"],"mappings":"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","sourcesContent":[";((w, $) => {\r\n  $.fn.kover = function () {\r\n\r\n    // global function : get natural image size\r\n    let getNatural = function (DOMelement) {\r\n      var img = new Image()\r\n      img.src = DOMelement.src\r\n      return { width: img.width, height: img.height }\r\n    }\r\n\r\n    // define each instance\r\n    return this.each(function () {\r\n      let _ = this\r\n      _.init = () => {\r\n        if (!_) {\r\n          throw 'kover.js: A wrap cell is required!'\r\n        }\r\n        if ($('img', $(_)).length > 1) {\r\n          throw 'kover.js: multiple images detected! One cell can contain only one image, same as in CSS.'\r\n        }\r\n\r\n        // find the image inside\r\n        _.img = $('img', $(_))\r\n\r\n        // define default image ratio\r\n        _.ratio = null\r\n\r\n        // resize event\r\n        $(window, $(_)).on('resize', function () {\r\n          _.calcStyle($(_), _.img, _.ratio)\r\n        })\r\n\r\n        // \r\n        var preload = new Image(),\r\n          path = _.img.get(0).src\r\n        preload.src = path + '?' + Math.random()\r\n        preload.onload = function () {\r\n\r\n          // whats gonna happen when a image is fully loaded\r\n          _.img_size = getNatural(preload)\r\n          _.ratio = _.img_size.height / _.img_size.width\r\n\r\n          // boost calculation for 1s, ie 7 sucks\r\n          let l = 1\r\n          let time = 1000\r\n          let int = 10\r\n          let s = setInterval(() => {\r\n            if (l * int >= time) {\r\n              w.clearInterval(s)\r\n            }\r\n\r\n            _.calcStyle($(_), _.img, _.ratio)\r\n\r\n            l++\r\n          }, int)\r\n        }\r\n      }\r\n\r\n      // calculation function\r\n      _.calcStyle = (wrapcell, img, r) => {\r\n\r\n        // normal situration: static css will do the trick\r\n        wrapcell.css({\r\n          position: 'relative'\r\n        })\r\n        img.css({\r\n          position: 'absolute',\r\n          zIndex: '0',\r\n          top: '50%',\r\n          left: '50%',\r\n          width: '100%',\r\n          marginLeft: -(wrapcell.width() / 2) + 'px',\r\n          marginTop: -(img.height() / 2) + 'px',\r\n          height: 'auto'\r\n        })\r\n\r\n        // this is where the magic happens, when the image height is lower than the container, we put the image height as same as the container. meanwhile, change the image width accordding to the original image ratio.\r\n        if (img.height() < wrapcell.height()) {\r\n          img.css({\r\n            maxWidth: 'none',\r\n            height: wrapcell.height(),\r\n            width: wrapcell.height() / r + 'px',\r\n            marginTop: -(wrapcell.height() / 2) + 'px',\r\n            marginLeft: -(wrapcell.height() / r / 2) + 'px'\r\n          })\r\n        }\r\n      }\r\n      _.init()\r\n    })\r\n  }\r\n})(window, jQuery)\r\n"],"file":"kover.js"}